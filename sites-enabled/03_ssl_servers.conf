# SSL handling - one per server_name

# BEGIN server block for vcea.wsu.edu
#
# We don't force HTTPS for vcea.wsu.edu yet on the front-end.
#
# etm.wsu.edu is a VCEA site and should allow HTTP for now.
server {
    listen 80;
    server_name www.etm.wsu.edu www.engrmgt.wsu.edu engrmgt.wsu.edu;
    return 301 http://etm.wsu.edu$request_uri;
}

# cea.wsu.edu is a VCEA redirect and should allow HTTP for now.
server {
    listen 80;
    server_name www.cea.wsu.edu cea.wsu.edu www.vcea.wsu.edu vcea.wsu.edu;
    return 301 https://vcea.wsu.edu$request_uri;
}

# swe.wsu.edu is a VCEA redirect and should allow HTTP for now.
server {
    listen 80;
    server_name swe.wsu.edu;
    return 301 https://vcea.wsu.edu/swe$request_uri;
}

server {
    server_name vcea.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/vcea.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/vcea.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    include /etc/nginx/wsuwp-common.conf;
}
# END server block for vcea.wsu.edu

# BEGIN server block for forlang.wsu.edu
server {
    listen 80;
    server_name www.forlang.wsu.edu forlang.wsu.edu;

    rewrite /help/keyboards2.asp?PHPSESSID=e0c8b8f6491f03954a412be9221c1672 https://forlang.wsu.edu/help-pages/help-pages-keyboards-os-x/ permanent;

    return 301 https://forlang.wsu.edu$request_uri;
}

server {
    server_name www.forlang.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/forlang.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/forlang.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    return 301 https://forlang.wsu.edu$request_uri;
}

server {
    server_name forlang.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/forlang.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/forlang.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;

    rewrite ^/help/keyboards.asp https://forlang.wsu.edu/help-pages/microsoft-keyboards-standard-english-us101/? permanent;
    rewrite ^/help/keyboards2.asp https://forlang.wsu.edu/help-pages/help-pages-keyboards-os-x/? permanent;

    include /etc/nginx/wsuwp-common.conf;
}
# END server block for forlang.wsu.edu

# BEGIN server block for foundation.wsu.edu
server {
    listen 80;
    server_name foundation.wsu.edu www.foundation.wsu.edu;
    return 301 https://foundation.wsu.edu$request_uri;
}

server {
    server_name www.foundation.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/foundation.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/foundation.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    return 301 https://foundation.wsu.edu$request_uri;
}

server {
    server_name foundation.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/foundation.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/foundation.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;

    rewrite ^/campaign/img/(.*) https://foundation.wsu.edu/wp-content/themes/wsu-foundation-theme/external/img/campaign/img/$1 permanent;
    rewrite ^/(img|css|js)/ https://foundation.wsu.edu/wp-content/themes/wsu-foundation-theme/external$request_uri permanent;

    include /etc/nginx/wsuwp-common.conf;
}
# END server block for foundation.wsu.edu

# BEGIN generated server block for admission.wsu.edu
#
# Generated 2015-08-07 22:32:33 by jeremy.felt
server {
    listen 80;
    server_name futurestudent.wsu.edu futurestudents.wsu.edu;
    return 301 https://admission.wsu.edu$request_uri;
}

server {
    listen 80;
    server_name admission.wsu.edu www.admission.wsu.edu
                admissions.wsu.edu blogs.admission.wsu.edu;

    location / {
        return 301 https://admission.wsu.edu$request_uri;
    }

    location /2012/pages/home/voices.php {
        return 404 'Requested voices.php is not available.';
    }

    location /2012/pages/home/intro.php {
        return 404 'Requested intro.php is not available.';
    }

    location /2012/pages/home/distinctives.php {
        return 404 'Requested distinctives.php is not available.';
    }

    location /2012/inc/footer.html {
        return 404 'Requested footer.html is not available.';
        add_header Content-Type text/plain;
    }

    location /2012/inc/head.html {
        return 404 'Requested head.html is not available.';
        add_header Content-Type text/plain;
    }

    location /2012/inc/banner.html {
        return 404 '<h1>Requested banner.html is not available.</h1>';
        add_header Content-Type text/plain;
    }    
}

server {
    listen 80;
    server_name wa45.wsu.edu;
    return 301 https://admission.wsu.edu/apply/as/transfer/credits/;
}

server {
    listen 80;
    server_name caacalculator.wsu.edu;
    return 301 https://admission.wsu.edu/scholarships/non-washington-residents/cougar-academic-award/;
}

server {
    listen 80;
    server_name uaacalculator.wsu.edu;
    return 301 https://admission.wsu.edu/scholarships/washington-residents/uaa/;
}

server {
    listen 80;
    server_name transfer.wsu.edu;
    return 301 https://admission.wsu.edu/apply/as/transfer/requirements/;
}

server {
    server_name stage.admission.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/stage.admission.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/stage.admission.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    return 301 https://admission.wsu.edu$request_uri;
}

server {
    server_name www.admission.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/admission.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/admission.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    return 301 https://admission.wsu.edu$request_uri;
}

server {
    server_name blog.admissions.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/blog.admissions.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/blog.admissions.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    return 301 https://admission.wsu.edu$request_uri;
}

server {
    server_name blogs.admission.wsu.edu www.blogs.admission.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/blogs.admission.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/blogs.admission.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;
    return 301 https://admission.wsu.edu$request_uri;
}

server {
    server_name admission.wsu.edu;

    include /etc/nginx/wsuwp-common-header.conf;

    ssl_certificate     /etc/nginx/ssl/admission.wsu.edu.cer;
    ssl_certificate_key /etc/nginx/ssl/admission.wsu.edu.key;

    include /etc/nginx/wsuwp-ssl-common.conf;

    rewrite ^/academics/fos/Public/(.*)$ http://apps.admission.wsu.edu/academics/fos/Public/$1;

    rewrite ^/admitted/ https://admission.wsu.edu/admitted-students/ permanent;

    location ~ /(visits|academics)/lb {
        return 200 'OK Admission WordPress';
        add_header Content-Type text/plain;
    }

    # Load balancer requests that we do not support.
    location ~ /(.+)/lb {
        access_log off;
        return 404 'Not Available';
        add_header Content-Type text/plain;
    }

    location /lb {
        return 200 'OK Admission WordPress';
        add_header Content-Type text/plain;
    }

    location /2012/inc/footer.html {
        return 404 'Requested footer.html is not available.';
        add_header Content-Type text/plain;
    }

    location /2012/inc/head.html {
        return 404 'Requested head.html is not available.';
        add_header Content-Type text/plain;
    }

    location /2012/inc/banner.html {
        return 404 '<h1>Requested banner.html is not available.</h1>';
        add_header Content-Type text/plain;
    }

    rewrite ^/contact/counselors.html http://apps.admission.wsu.edu/counselors/ permanent;
    rewrite ^/index.html https://admission.wsu.edu/ permanent;
    rewrite ^/academics/index.html https://admission.wsu.edu/academics/ permanent;
    rewrite ^/requirements/index.html https://admission.wsu.edu/apply/as/find-your-application/ permanent;
    rewrite ^/visits/index.html https://admission.wsu.edu/visits/ permanent;
    rewrite ^/requirements/deadlines.html https://admission.wsu.edu/apply/deadlines/ permanent;
    rewrite ^/scholarships/index.html https://admission.wsu.edu/scholarships/ permanent;
    rewrite ^/requirements/freshman.html https://admission.wsu.edu/apply/as/freshmen/requirements/ permanent;
    rewrite ^/transfer/index.html https://admission.wsu.edu/apply/as/transfer/requirements/ permanent;
    rewrite ^/visits/individual/calendar.aspx https://admission.wsu.edu/visits/campus-tours/why-attend/ permanent;
    rewrite ^/visits/individual/index.html https://admission.wsu.edu/visits/campus-tours/why-attend/ permanent;
    rewrite ^/requirements/assured.html https://admission.wsu.edu/apply/as/freshman/assured-admission/ permanent;
    rewrite ^/scholarships/out-of-state.html https://admission.wsu.edu/scholarships/non-washington-residents/how-to-apply/ permanent;
    rewrite ^/applications/zzusis.html https://admission.wsu.edu/apply/mywsu/ permanent;
    rewrite ^/transfer/requirements.html https://admission.wsu.edu/apply/as/transfer/requirements permanent;
    rewrite ^/contact/index.html https://admission.wsu.edu/contact/ permanent;
    rewrite ^/requirements/residency.html https://admission.wsu.edu/scholarships/residency/ permanent;
    rewrite ^/scholarships/cost.html https://admission.wsu.edu/tuition-costs/tuition-break-down/ permanent;
    rewrite ^/zzusis.html https://admission.wsu.edu/apply/mywsu/ permanent;
    rewrite ^/transfer/credits.html https://admission.wsu.edu/apply/as/transfer/credits/ permanent;
    rewrite ^/applications/ https://admission.wsu.edu/apply/as/find-your-application/ permanent;
    rewrite ^/applications https://admission.wsu.edu/apply/as/find-your-application/ permanent;
    include /etc/nginx/wsuwp-common.conf;
}
# END generated server block for admission.wsu.edu
